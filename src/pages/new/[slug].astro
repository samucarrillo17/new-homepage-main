---
import Layout from "../../layouts/Layout.astro";
import { News, type NewsProps } from "../../common/article";
import { ArrowLeft } from "@lucide/astro";

export async function getStaticPaths() {
  // Pasar el artículo completo en props para evitar filtrado
  return News.map(item => ({
    params: { slug: item.slug },
    props: { article: item } // ← Clave para el rendimiento
  }));
}

interface Props {
  article: NewsProps;
}

// Recibir directamente el artículo desde props
const { article } = Astro.props;
---

<Layout>
  <div class="space-y-4 flex flex-col">
    <h1 
      class="text-3xl font-bold" 
      transition:name={article.title}
    >
      {article.title}
    </h1>
    <p class="text-md text-Grayish-blue italic">
      {article.description}
    </p>
    <p class="text-lg">
      {article.content}
    </p>
    <div class="flex justify-end text-Grayish-blue">
      <!-- Navegación directa sin JavaScript -->
      <a 
        href="/" 
        class="hover:text-Very-dark-blue flex cursor-pointer items-center gap-1 transition-colors"
        id="goBack"
      >
        <ArrowLeft class="size-5" />
        Atrás
      </a>
    </div>
  </div>
</Layout>

<script>
    document.addEventListener('astro:page-load',()=>{
        const backbtn = document.querySelector("#goBack")
        backbtn?.addEventListener('click', ()=>{
            history.back()
        })
    })
</script>